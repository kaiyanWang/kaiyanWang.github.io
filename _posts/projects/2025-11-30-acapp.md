---
title: 基于Django + Vue + APP的术士之战游戏
tags: Project
cover: /assets/images/axure/page-single.jpg
category: Django
---


支持在线联机对战的简易版吃鸡游戏，前后端分离，前端支持APP端和Web端。技术栈：Django，WebSocket，微服务，Vue，Redis，nginx。代码编写在云服务终端完成

功能包括：
- 游戏菜单、游戏设置：熟悉http协议
- 存储对局信息、账户信息：熟悉数据库操作
- 在Redis中存储对局状态：熟悉内存数据库操作
- 在线聊天室、实时移动、实时放技能：熟悉websocket协议
- 在线匹配系统：熟悉thrift和微服务
- 配置nginx：熟悉nginx部署云服务

<!--more-->

### Docker环境配置

购买云服务后，新建用户wky，并配置别名wkyserver和免密登录，将django_lesson_1_0.tar传到云服务器（具体见租云服务器及配置Docker环境）
```bash
docker load -i django_lesson_1_0.tar
docker run -p 20000:22 -p 8000:8000 --name django_server -itd django_lesson:1.0 # 记得开放这两个端口，20000端口用于ssh登录，8000端口用于调试
docker attach django_server
adduser wky
usermod -aG sudo wky
```
然后ctrl+p, ctrl+q挂起容器，回到云服务器层
```bash
ssh wky@localhost -p 20000  # 在云服务器层ssh连接到docker层的wky，测试20000端口是否开放
```

然后logout(ctrl+d)回到云服务器层，再logout回到本地终端

配置别名djangoserver：

```bash
cd .ssh
vim config
```

```bash
Host djangoserver
        HostName 39.99.43.230
        User wky
        port 20000
```

配置免密登录
```bash
ssh-copy-id djangoserver
```

回到本地终端：将配置文件.bashrc .vimrc .tmux.config传到djangoserver（也可以在云服务器wkyserver传，因为云服务器也传入了这些配置文件，只不过云服务没有配置别名，不能用djangoserver）

### git并创建项目

生成ssh-key，将秘钥传到github
```bash
cd
ssh-keygen
cd .ssh
cat id_rsa.pub
```

创建django项目：
```bash
django-admin startproject acapp
cd acapp
git init
git config --global user.name "kaiyanWang"
git config --global user.email "321202864@qq.com"
git remote add origin git@github.com:kaiyanWang/acapp.git
```

### 运行
```bash
python3 manage.py runserver 0.0.0.0:8000
```
发现报错，将云服务器ip写到allowed_hosts里（字符串形式写）：
```bash
vim acpp/setting.py
```
浏览器打开`云服务器ip:8000`，出现django页面，表示运行成功。

```bash
python3 manage.py startapp game
```
